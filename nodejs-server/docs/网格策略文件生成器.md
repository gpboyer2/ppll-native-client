# 网格策略文件生成器

## 需求背景

用户需要快速启动网格交易策略，但每次手动创建策略文件比较繁琐。需要一个生成器，通过简单配置即可自动生成可执行的网格策略文件。

## 功能说明

生成器位于 `temporary/generator.js`，支持：

1. **U本位合约网格**（做多/做空）
2. **现货网格**

## 使用方法

### 1. 修改配置

打开 `temporary/generator.js`，修改 `CONFIG` 对象：

```javascript
const CONFIG = {
  symbol: 'BTC',           // 交易对（不含USDT后缀）
  market: 'usdm',          // 'usdm'(U本位合约) | 'spot'(现货)
  positionSide: 'LONG',    // 'LONG'(做多) | 'SHORT'(做空)
  account: 'dahao',        // 账号选择

  // 网格参数
  gridPriceDifference: 100,
  gridLongOpenQuantity: 0.001,
  gridLongCloseQuantity: 0.001,
  // ...其他参数
};
```

### 2. 执行生成器

```bash
node ./temporary/generator.js
```

### 3. 启动策略

生成器会输出启动命令，例如：

```bash
# Node 启动（开发环境）
NODE_ENV=development node ./temporary/BTC-LONG-umInfiniteGrid.js

# PM2 启动（开发环境）
NODE_ENV=development pm2 start ./temporary/BTC-LONG-umInfiniteGrid.js

# PM2 启动（生产环境）
NODE_ENV=production pm2 start ./temporary/BTC-LONG-umInfiniteGrid.js
```

## 账号配置

| 账号标识 | 账号名称 |
|---------|---------|
| shahui  | 傻辉    |
| gandan  | 跟单    |
| dahao   | 大号    |
| dexin   | 德鑫    |
| liushao | 刘少    |
| junxin  | 俊鑫    |

## 生成文件命名规则

- U本位合约做多：`{SYMBOL}-LONG-umInfiniteGrid.js`
- U本位合约做空：`{SYMBOL}-SHORT-umInfiniteGrid.js`
- 现货：`{SYMBOL}-SPOT-InfiniteGrid.js`

## 配置参数说明

| 参数 | 说明 | 示例 |
|-----|------|-----|
| symbol | 交易对（不含USDT） | 'BTC', 'ETH' |
| market | 市场类型 | 'usdm', 'spot' |
| positionSide | 持仓方向（仅合约） | 'LONG', 'SHORT' |
| account | 账号标识 | 'dahao' |
| gridPriceDifference | 网格价差（USDT） | 100 |
| gridLongOpenQuantity | 做多开仓数量 | 0.001 |
| gridLongCloseQuantity | 做多平仓数量 | 0.001 |
| gridShortOpenQuantity | 做空开仓数量 | 0.001 |
| gridShortCloseQuantity | 做空平仓数量 | 0.001 |
| gridTradeQuantity | 现货交易数量 | 0.001 |
| maxOpenPositionQuantity | 最大持仓数量 | undefined |
| minOpenPositionQuantity | 最小持仓数量 | undefined |
| fallPreventionCoefficient | 防跌/防涨系数 | 0 |
| pollingInterval | 轮询间隔（ms） | 5000 |
| gtLimitationPrice | 大于等于该价暂停 | undefined |
| ltLimitationPrice | 小于等于该价暂停 | undefined |

## 相关文件

- 生成器：`temporary/generator.js`
- U本位合约策略插件：`plugin/umInfiniteGrid.js`
- 现货策略插件：`plugin/spotInfiniteGrid.js`

## 维护说明

如需新增账号，在 `generator.js` 的 `ACCOUNTS` 对象中添加：

```javascript
const ACCOUNTS = {
  // ...现有账号
  newaccount: {
    name: '新账号名称',
    apiKey: 'xxx',
    apiSecret: 'xxx',
  },
};
```
