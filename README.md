# PPLL Native Client

> PPLL é‡åŒ–äº¤æ˜“ç”Ÿæ€ç³»ç»Ÿçš„ä¸“ä¸šæ¡Œé¢å®¢æˆ·ç«¯

## ğŸ“– å®Œæ•´æ–‡æ¡£

è¯·æŸ¥çœ‹ [å®Œæ•´é¡¹ç›®æ–‡æ¡£](.github/README.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

ä½¿ç”¨å¯åŠ¨è„šæœ¬è‡ªåŠ¨å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼š

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/gpboyer2/ppll-native-client.git
cd ppll-native-client

# ä¸€é”®å¯åŠ¨ï¼ˆé¦–æ¬¡ä½¿ç”¨ä¼šè¿›è¡Œç¯å¢ƒæ£€æŸ¥ï¼‰
./start-mac.sh

# å¿«é€Ÿå¯åŠ¨ï¼ˆè·³è¿‡ç¯å¢ƒæ£€æŸ¥ï¼‰
./start-mac.sh -q
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥ Goã€Node.jsã€Wails ç¯å¢ƒ
- å®‰è£…å‰ç«¯ä¾èµ–
- å¯åŠ¨ Wails å¼€å‘æœåŠ¡å™¨
- æ—¥å¿—è¾“å‡ºåˆ° `process-monitoring/` ç›®å½•

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ†ç¦»å¯åŠ¨

åˆ†åˆ«å¯åŠ¨æ¡Œé¢å®¢æˆ·ç«¯å’Œåç«¯æœåŠ¡ï¼ˆé€‚åˆè°ƒè¯•ï¼‰ï¼š

```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨æ¡Œé¢å®¢æˆ·ç«¯ï¼ˆGo + å‰ç«¯ï¼‰
cd /path/to/ppll-native-client
wails dev

# ç»ˆç«¯2ï¼šå¯åŠ¨ Node.js åç«¯æœåŠ¡
cd /path/to/ppll-native-client/nodejs-server
npm run node:dev
```

### ä¾èµ–è¦æ±‚

| å·¥å…· | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Go | 1.20+ | åç«¯è¯­è¨€ |
| Node.js | 16+ | è¿è¡Œæ—¶ç¯å¢ƒ |
| Wails | v2 | æ¡Œé¢åº”ç”¨æ¡†æ¶ |

å®‰è£… Wailsï¼š
```bash
go install github.com/wailsapp/wails/v2/cmd/wails@latest
```

## ğŸ› ï¸ è„šæœ¬ä½¿ç”¨æŒ‡å—

### å¼€å‘ç¯å¢ƒè„šæœ¬

#### start-mac.sh - ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ

**ç”¨é€”**: å¯åŠ¨ Wails æ¡Œé¢åº”ç”¨å¼€å‘ç¯å¢ƒ

**ä½¿ç”¨åœºæ™¯**: æ—¥å¸¸å¼€å‘æ—¶å¯åŠ¨åº”ç”¨

**ä½¿ç”¨æ–¹æ³•**:
```bash
# å®Œæ•´å¯åŠ¨ï¼ˆé¦–æ¬¡ä½¿ç”¨æ¨èï¼Œæ‰§è¡Œç¯å¢ƒæ£€æŸ¥ï¼‰
./start-mac.sh

# å¿«é€Ÿå¯åŠ¨ï¼ˆè·³è¿‡ç¯å¢ƒæ£€æŸ¥ï¼‰
./start-mac.sh -q

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./start-mac.sh --help
```

**åŠŸèƒ½è¯´æ˜**:
- è‡ªåŠ¨æ£€æŸ¥ Goã€Node.jsã€Wails ç¯å¢ƒ
- è‡ªåŠ¨å®‰è£…å‰ç«¯ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
- å¯åŠ¨ Wails å¼€å‘æœåŠ¡å™¨ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
- æ—¥å¿—è¾“å‡ºåˆ° `process-monitoring/` ç›®å½•ï¼Œæ ¼å¼ä¸º `yyyyMMddHH0000/`

**ä¾èµ–è¦æ±‚**:
- Go 1.20+
- Node.js 16+
- Wails v2

---

#### prepare-dev.sh - å‡†å¤‡å¼€å‘ç¯å¢ƒ

**ç”¨é€”**: é‡ç½®ä»£ç ã€å®‰è£…ä¾èµ–ã€å‡†å¤‡å¼€å‘ç¯å¢ƒ

**ä½¿ç”¨åœºæ™¯**:
- é¦–æ¬¡è®¾ç½®å¼€å‘ç¯å¢ƒ
- åˆ‡æ¢åˆ†æ”¯åéœ€è¦é‡æ–°å®‰è£…ä¾èµ–
- éœ€è¦é‡ç½®å¼€å‘ç¯å¢ƒæ—¶

**ä½¿ç”¨æ–¹æ³•**:
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆpnpm + master åˆ†æ”¯ï¼‰
./prepare-dev.sh

# ä½¿ç”¨ npm
./prepare-dev.sh -n=npm

# ä» develop åˆ†æ”¯å‡†å¤‡
./prepare-dev.sh -b=develop

# ç»„åˆä½¿ç”¨
./prepare-dev.sh -n=pnpm -b=master
```

**åŠŸèƒ½è¯´æ˜**:
- åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯å¹¶æ‹‰å–æœ€æ–°ä»£ç 
- å®‰è£… Go ä¾èµ–
- å®‰è£…å‰ç«¯ä¾èµ–ï¼ˆæ”¯æŒ npm/pnpmï¼‰
- å®‰è£… Node.js åç«¯ä¾èµ–
- è‡ªåŠ¨æ£€æµ‹å¹¶å¤„ç†åŒ…ç®¡ç†å™¨åˆ‡æ¢

---

### ä»“åº“ç®¡ç†è„šæœ¬

#### setup-dual-repo.sh - é…ç½®åŒä»“åº“

**ç”¨é€”**: é…ç½® Gitee å’Œ GitHub åŒä»“åº“

**ä½¿ç”¨åœºæ™¯**:
- é¦–æ¬¡è®¾ç½®é¡¹ç›®æ—¶
- éœ€è¦é‡æ–°é…ç½®è¿œç¨‹ä»“åº“

**ä½¿ç”¨æ–¹æ³•**:
```bash
./setup-dual-repo.sh
```

**åŠŸèƒ½è¯´æ˜**:
- äº¤äº’å¼æ·»åŠ  GitHub è¿œç¨‹ä»“åº“
- ä¿æŒ origin ä¸º Giteeï¼ˆç”¨äºæ—¥å¸¸å¼€å‘ï¼‰
- github è¿œç¨‹ä»“åº“ç”¨äºå‘å¸ƒç‰ˆæœ¬å’Œè§¦å‘æ„å»º
- è‡ªåŠ¨æµ‹è¯•è¿æ¥å¹¶æä¾›ä½¿ç”¨æŒ‡å—

**é…ç½®åä½¿ç”¨**:
```bash
# æ—¥å¸¸å¼€å‘ - æ¨é€åˆ° Gitee
git push origin master

# å‘å¸ƒç‰ˆæœ¬ - æ¨é€åˆ° GitHub
git push github master
git tag v1.0.0
git push github --tags

# åŒæ—¶æ¨é€åˆ°ä¸¤ä¸ªä»“åº“
git push origin master && git push github master
```

---

#### push-dual-repo.sh - åŒä»“åº“æ¨é€

**ç”¨é€”**: åŒæ—¶æ¨é€ä»£ç åˆ° Gitee å’Œ GitHub

**ä½¿ç”¨åœºæ™¯**:
- éœ€è¦åŒæ­¥ä»£ç åˆ°ä¸¤ä¸ªä»“åº“
- å‘å¸ƒç‰ˆæœ¬æ—¶æ¨é€åˆ° GitHub

**ä½¿ç”¨æ–¹æ³•**:
```bash
./push-dual-repo.sh
```

**åŠŸèƒ½è¯´æ˜**:
- äº¤äº’å¼é€‰æ‹©æ¨é€ç›®æ ‡ï¼ˆGitee/GitHub/ä¸¤è€…ï¼‰
- è‡ªåŠ¨æ£€æµ‹æœªæäº¤çš„æ›´æ”¹
- æ”¯æŒä»£ç†é…ç½®ï¼ˆç”¨äºè¿æ¥ GitHubï¼‰
- å½©è‰²è¾“å‡ºæ˜¾ç¤ºæ¨é€çŠ¶æ€

**æ”¯æŒçš„æ“ä½œ**:
- ä»…æ¨é€åˆ° Giteeï¼ˆå¿«é€Ÿï¼‰
- ä»…æ¨é€åˆ° GitHubï¼ˆå‘å¸ƒï¼‰
- åŒæ—¶æ¨é€åˆ°ä¸¤ä¸ªä»“åº“

---

### æ„å»ºå‘å¸ƒè„šæœ¬

#### local-release-build.sh - æœ¬åœ°å‘å¸ƒæ„å»º

**ç”¨é€”**: åœ¨æœ¬åœ°æ„å»º macOS å’Œ Windows åº”ç”¨å¹¶æ‰“æ ‡ç­¾

**ä½¿ç”¨åœºæ™¯**:
- éœ€è¦å¿«é€Ÿæ„å»ºæœ¬åœ°åº”ç”¨åŒ…
- å†…éƒ¨æµ‹è¯•æˆ–å°è§„æ¨¡åˆ†å‘
- ä¸éœ€è¦è§¦å‘ GitHub Actions

**ä½¿ç”¨æ–¹æ³•**:
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆè‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬æ ‡ç­¾ï¼‰
./local-release-build.sh

# ä½¿ç”¨ npm
./local-release-build.sh -n=npm

# ä» develop åˆ†æ”¯æ„å»º
./local-release-build.sh -b=develop

# æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬æ ‡ç­¾ï¼ˆä¸æ¨èï¼‰
./local-release-build.sh -v=1.0.0
```

**åŠŸèƒ½è¯´æ˜**:
- è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬æ ‡ç­¾ï¼ˆæ ¼å¼ï¼š`build-åˆ†æ”¯-åŒ…ç®¡ç†å™¨-æ—¶é—´`ï¼‰
- è°ƒç”¨ `build-platforms.sh` æ‰§è¡Œå¤šå¹³å°æ„å»º
- æäº¤æ„å»ºäº§ç‰©åˆ° Git
- æ¨é€åˆ°æŒ‡å®šåˆ†æ”¯å¹¶åˆ›å»ºæ ‡ç­¾

**ç”Ÿæˆçš„æ ‡ç­¾ç¤ºä¾‹**:
- `build-prod-p-20241227-143000`ï¼ˆmaster + pnpmï¼‰
- `build-dev-n-20241227-143000`ï¼ˆdevelop + npmï¼‰

---

#### github-release-build.sh - GitHub è‡ªåŠ¨æ„å»º

**ç”¨é€”**: é€šè¿‡åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾è§¦å‘ GitHub Actions å¤šå¹³å°æ„å»º

**ä½¿ç”¨åœºæ™¯**:
- æ­£å¼å‘å¸ƒè½¯ä»¶ç‰ˆæœ¬
- é¢å‘å…¬ä¼—ç”¨æˆ·çš„å‘å¸ƒ
- éœ€è¦ç”Ÿæˆ GitHub Release é¡µé¢

**ä½¿ç”¨æ–¹æ³•**:
```bash
./github-release-build.sh
```

**åŠŸèƒ½è¯´æ˜**:
- äº¤äº’å¼è¾“å…¥ç‰ˆæœ¬å·ï¼ˆæ¨èä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰
- è‡ªåŠ¨æ›´æ–° `wails.json` ä¸­çš„ç‰ˆæœ¬å·
- åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾å¹¶æ¨é€åˆ° GitHub
- è§¦å‘ GitHub Actions è‡ªåŠ¨æ„å»ºå¤šå¹³å°ç‰ˆæœ¬

**æ„å»ºäº§ç‰©**:
- macOS Intel (x64) - .dmg
- macOS Apple Silicon (arm64) - .dmg
- macOS Universal - .dmg
- Windows x64 - .exe
- Windows ARM64 - .exe

**é¢„è®¡æ„å»ºæ—¶é—´**: 10-20 åˆ†é’Ÿ

**æŸ¥çœ‹æ„å»ºè¿›åº¦**:
```bash
# GitHub Actions é¡µé¢
https://github.com/gpboyer2/ppll-native-client/actions

# ä¸‹è½½æ„å»ºäº§ç‰©
https://github.com/gpboyer2/ppll-native-client/releases
```

---

#### build-platforms.sh - å¤šå¹³å°æ„å»º

**ç”¨é€”**: æ„å»ºæ‰€æœ‰å¹³å°çš„å‘å¸ƒåŒ…ï¼ˆæœ¬åœ°æ‰§è¡Œï¼‰

**ä½¿ç”¨åœºæ™¯**:
- éœ€è¦æœ¬åœ°æ„å»ºç‰¹å®šå¹³å°çš„åº”ç”¨
- æµ‹è¯•æ„å»ºæµç¨‹
- è¢« `local-release-build.sh` è°ƒç”¨

**ä½¿ç”¨æ–¹æ³•**:
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆpnpm + masterï¼‰
./build-platforms.sh

# ä½¿ç”¨ npm
./build-platforms.sh -n=npm

# ä» develop åˆ†æ”¯æ„å»º
./build-platforms.sh -b=develop
```

**æ„å»ºå¹³å°**:
- macOS Intel (x64)
- macOS Apple Silicon (arm64)
- macOS Universal
- Windows x64
- Windows ARM64

**è¾“å‡ºæ–‡ä»¶**:
- macOS: `build/ppll-client-v{version}-mac-*.dmg`
- Windows: `build/ppll-client-v{version}-win-*.exe`

**æ³¨æ„äº‹é¡¹**:
- macOS æ„å»ºéœ€è¦ macOS ç¯å¢ƒ
- Windows æ„å»ºéœ€è¦ Windows ç¯å¢ƒ
- è·¨å¹³å°æ„å»ºéœ€è¦ä½¿ç”¨ GitHub Actions

---

### è„šæœ¬ä½¿ç”¨æ€»ç»“

| è„šæœ¬ | ä½¿ç”¨é¢‘ç‡ | ä½¿ç”¨åœºæ™¯ | è¾“å‡º |
|------|---------|---------|------|
| start-mac.sh | é«˜ | æ¯æ—¥å¼€å‘ | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| prepare-dev.sh | ä¸­ | ç¯å¢ƒè®¾ç½® | å®‰è£…ä¾èµ– |
| setup-dual-repo.sh | ä½ | é¦–æ¬¡é…ç½® | é…ç½®è¿œç¨‹ä»“åº“ |
| push-dual-repo.sh | é«˜ | å‘å¸ƒç‰ˆæœ¬ | æ¨é€ä»£ç  |
| local-release-build.sh | ä¸­ | æœ¬åœ°æ„å»º | åº”ç”¨å®‰è£…åŒ… |
| github-release-build.sh | ä¸­ | æ­£å¼å‘å¸ƒ | è§¦å‘ CI/CD |
| build-platforms.sh | ä½ | æœ¬åœ°æ„å»º | åº”ç”¨å®‰è£…åŒ… |

**æ¨èå·¥ä½œæµç¨‹**:

1. é¦–æ¬¡è®¾ç½®: `setup-dual-repo.sh` â†’ `prepare-dev.sh` â†’ `start-mac.sh`
2. æ—¥å¸¸å¼€å‘: `start-mac.sh`
3. å‘å¸ƒç‰ˆæœ¬: `push-dual-repo.sh` â†’ `github-release-build.sh`

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- [å®Œæ•´é¡¹ç›®æ–‡æ¡£](.github/README.md) - é¡¹ç›®ä»‹ç»ã€æŠ€æœ¯æ¶æ„ã€å¼€å‘æŒ‡å—
- [GitHub Actions æ–‡æ¡£](.github/workflows/README.md) - è‡ªåŠ¨åŒ–æ„å»ºæŒ‡å—
- [å·¥ä½œæµç¨‹å¯è§†åŒ–](.github/ACTIONS_WORKFLOW.md) - CI/CD æµç¨‹å›¾
- [å®Œæ•´ä½¿ç”¨æ•™ç¨‹](.github/GITHUB_ACTIONS_GUIDE.md) - ä»å…¥é—¨åˆ°ç²¾é€š

## æ ¸å¿ƒç‰¹æ€§

- ğŸš€ åŸºäº Wails çš„è·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼ˆWindows/macOS/Linuxï¼‰
- ğŸ’¼ ä¸“ä¸šé‡åŒ–äº¤æ˜“åŠŸèƒ½ï¼ˆç½‘æ ¼ç­–ç•¥ã€å®æ—¶ç›‘æ§ã€é£é™©æ§åˆ¶ï¼‰
- ğŸ“Š é«˜çº§æ•°æ®åˆ†æï¼ˆKçº¿å›¾ã€æŠ€æœ¯æŒ‡æ ‡ã€ç­–ç•¥å›æµ‹ï¼‰
- ğŸ›¡ï¸ å®‰å…¨ä¸éšç§ï¼ˆæœ¬åœ°å¯†é’¥å­˜å‚¨ã€æ•°æ®åŠ å¯†ä¼ è¾“ï¼‰

## æŠ€æœ¯æ ˆ

- **æ¡Œé¢ç«¯**: Go 1.21+ / Wails v2
- **åç«¯**: Node.js 16+ / Express.js / Sequelize / WebSocket / SQLite
- **å‰ç«¯**: React 18 / TypeScript / Zustand / Mantine UI / ECharts

## æ¶æ„è¯´æ˜

- Go ç«¯ï¼šè´Ÿè´£æ¡Œé¢å®¢æˆ·ç«¯æ¡†æ¶ã€ç³»ç»Ÿè°ƒç”¨ã€é…ç½®å­˜å‚¨ã€æ’ä»¶ç®¡ç†
- NodeJS ç«¯ï¼šè´Ÿè´£ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åº“æ“ä½œã€API æ¥å£ã€WebSocket æœåŠ¡
- æ•°æ®åº“ï¼šSQLite å®Œå…¨ç”± NodeJS ç«¯ç®¡ç†ï¼ˆæ¨¡å‹å®šä¹‰ã€åˆå§‹åŒ–ã€CRUD æ“ä½œï¼‰

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µï¼šhttps://github.com/gpboyer2/ppll-native-client
- é—®é¢˜åé¦ˆï¼šhttps://github.com/gpboyer2/ppll-native-client/issues
- é‚®ç®±ï¼šteam@ppll.com

---

**PPLL Native Client** - ä¸ºä¸“ä¸šé‡åŒ–äº¤æ˜“è€…æ‰“é€ çš„æ¡Œé¢äº¤æ˜“å¹³å°
